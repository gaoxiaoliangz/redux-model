{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 636f132dfa6128aebbf5","webpack:///./src/index.js","webpack:///external \"lodash/assign\"","webpack:///external \"lodash/mapValues\"","webpack:///external \"lodash/map\"","webpack:///external \"lodash/keys\"","webpack:///external \"redux\"","webpack:///external \"react-redux\"","webpack:///external \"redux-saga/effects\""],"names":["feedStore","store","models","forEach","model","extractReducer","reduce","obj","namespace","reducer","extractSaga","map","saga","filter","Boolean","generateActionCreator","payload","meta","type","error","Error","undefined","Model","state","actionCreators","computations","effects","self","initialState","types","concat","includes","key","console","warn","push","actionTypes","generatedActionCreators","creators","_generateActionCreator","_actionCreators","_mapCreatorTypes","action","state1","_unprefixType","bind","generator","_effectToSaga","_prefixType","component","mapStateToProps","mapDispatch","dispatch","bindedActions","_bindDispatch","actionCreator","_store","typePrefix","startsWith","substr","length","type2","createModel","config"],"mappings":"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","file":"redux-model.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reduxModel\"] = factory();\n\telse\n\t\troot[\"reduxModel\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 636f132dfa6128aebbf5","import _ from 'lodash'\nimport { combineReducers } from 'redux'\nimport { connect } from 'react-redux'\nimport { put, fork, takeEvery } from 'redux-saga/effects'\n\nexport const feedStore = (store, models) => {\n  models.forEach(model => {\n    model.store = store\n  })\n}\n\nexport const extractReducer = models => {\n  return combineReducers(models.reduce((obj, model) => {\n    return {\n      ...obj,\n      [model.namespace]: model.reducer\n    }\n  }, {}))\n}\n\nexport const extractSaga = models => {\n  return function* () {\n    yield models\n      .map(model => model.saga)\n      .filter(Boolean)\n      .map(saga => fork(saga))\n  }\n}\n\nconst generateActionCreator = type => (payload, meta) => {\n  return {\n    type,\n    payload,\n    meta,\n    error: payload instanceof Error ? true : undefined\n  }\n}\n\nclass Model {\n  constructor({\n    namespace,\n    state,\n    actionCreators,\n    reducer,\n    computations,\n    saga,\n    effects,\n  } = {}) {\n    const self = this\n    this.namespace = namespace\n    this.initialState = state\n\n    // get types\n    const types = _.keys(computations)\n    _.keys(effects)\n      .concat(_.keys(actionCreators))\n      .forEach(key => {\n        if (types.includes(key)) {\n          console.warn(`Duplicated key '${key}' found! ('computations', 'effects' and 'actionCreators' should not contain the same key)`)\n        } else {\n          types.push(key)\n        }\n      })\n    this.actionTypes = types\n\n    // generate action creators\n    const generatedActionCreators = types.reduce((creators, type) => {\n      return {\n        ...creators,\n        [type]: this._generateActionCreator(type)\n      }\n    }, {})\n    this._actionCreators = {\n      ...generatedActionCreators,\n      ...this._mapCreatorTypes(actionCreators)\n    }\n\n    // generate reducer\n    this.reducer = (state = this.initialState, action) => {\n      const state1 = reducer\n        ? reducer(state, action)\n        : state\n      const type = this._unprefixType(action.type)\n      if (computations[type]) {\n        return computations[type](state1, action.payload, action.meta, action.error)\n      }\n      return state1\n    }\n\n    // saga\n    if (saga || effects) {\n      this.saga = function* () {\n        yield [\n          ...saga ? [fork(saga.bind(self))] : [],\n          ...effects\n            ? _.map(effects, (generator, key) => {\n              return fork(this._effectToSaga(key, generator.bind(self)))\n            })\n            : []\n        ]\n      }.bind(this)\n    }\n  }\n\n  _effectToSaga(key, generator) {\n    const type = this._prefixType(key)\n    return function* () {\n      yield takeEvery(type, function* (action) {\n        yield put({ type: type + '@start' })\n        yield generator(action.payload, action.meta, action.error)\n        yield put({ type: type + '@end' })\n      })\n    }\n  }\n\n  _generateActionCreator = type => generateActionCreator(this._prefixType(type))\n\n  _unprefixType = type => {\n    const typePrefix = this.namespace + '/'\n    if (type.startsWith(typePrefix)) {\n      return type.substr(typePrefix.length)\n    }\n    return type\n  }\n\n  _prefixType = type => {\n    if (!this.namespace) {\n      return type\n    }\n    return `${this.namespace}/${type}`\n  }\n\n  _mapCreatorTypes = actionCreators => {\n    return _.mapValues(actionCreators, (actionCreator, type) => {\n      const type2 = this._prefixType(type)\n      return (...args) => ({\n        type: type2,\n        ...actionCreator(...args)\n      })\n    })\n  }\n\n  _bindDispatch = actionCreator => {\n    return (...args) => this.dispatch(actionCreator(...args))\n  }\n\n  set store(store) {\n    this.dispatch = store.dispatch\n    const bindedActions = _.mapValues(this._actionCreators, actionCreator => {\n      return this._bindDispatch(actionCreator)\n    })\n    _.assign(this, bindedActions)\n    this._store = store\n  }\n\n  get store() {\n    return this._store\n  }\n\n  connect(component, mapStateToProps, mapDispatch) {\n    return connect(mapStateToProps = (state => state[this.namespace]), mapDispatch)(component)\n  }\n}\n\nexport const createModel = config => new Model(config)\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"lodash/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/assign\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"lodash/mapValues\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/mapValues\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"lodash/map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/map\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"lodash/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/keys\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"redux-saga/effects\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-saga/effects\"\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}